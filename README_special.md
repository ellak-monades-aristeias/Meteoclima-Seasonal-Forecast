Το Έργο **"Πληροφορικές βελτιώσεις στην εποχιακή πρόγνωση του καιρού"** χωρίζεται σε 2 φάσεις με 2 επιμέρους παραδοτέα. Η πρώτη φάση περιλαμβάνει τη βελτιστοποίηση της επιχειρησιακής λειτουργίας μέσω εκτεταμένων τροποποιήσεων σε scripting languages (Linux Shell scripts, NCAR Command Language (NCL) scripts) με σκοπό τον καλύτερο συγχρονισμό των διεργασιών εκτέλεσης του μοντέλου και τη διαχείριση και οπτικοποίηση μεγάλου όγκου δεδομένων ως αποτελέσμα των προσομοιώσεων. Η δεύτερη φάση περιλαμβάνει την ανάπτυξη μεθοδολογίας και λογισμικού στατιστικής αξιολόγησης (μέσω Linux Shell και NCL scripts) των προγνώσεων.

**Παραδοτέο 1: Οι κώδικες που θα αναπτυχθούν και θα τροποποιηθούν στο πλαίσιο βελτίωσης της επιχειρησιακής λειτουργίας του μοντέλου.**

**Παραδοτέο 2: Οι κώδικες αξιολόγησης των εποχιακών προγνώσεων. Θα διατεθούν επίσης ελεύθερα οι τρέχουσες εποχιακές προγνώσεις υπό μορφή θεματικών χαρτών και δεδομένων δυαδικής μορφής.**

**Παρακάτω παρουσιάζονται τα περιεχόμενα και οι τεχνικές λεπτομέρειες για τα 2 παραδοτέα του έργου:**

**_Παραδοτέο 1_**

Το αριθμητικό μοντέλο πρόγνωσης **WRF-GLOBAL** της ομάδας **ACDG** προσομοιώνει την ατμοσφαιρική κατάσταση σε παγκόσμια κλίμακα με χρονικό εύρος ένα έτος. Βασικός σκοπός αυτού του παραδοτέου είναι η βελτιστοποίηση παραλληλοποίησης σε Message Passing Interface (MPI) ανοιχτών κωδίκων FORTRAN και η αποδοτικότερη εκτέλεση του μοντέλου WRF-GLOBAL. Η βελτιστοποίηση της επιχειρησιακής λειτουργίας περιλαμβάνει εκτεταμένες τροποποιήσεις σε **Linux Shell** και **NCL scripts** με σκοπό τον καλύτερο συγχρονισμό των διεργασιών εκτέλεσης του μοντέλου, την αυτοματοποίηση των διαδικασιών και τη διαχείριση και επεξεργασία μεγάλου όγκου δεδομένων (big data) ως αποτελέσμα των προσομοιώσεων.

Στο directory **PART1/SHELL** το **Shell script** με όνομα **LINK_CLIM.sh** συντελεί στη δημιουργία ενδιάμεσων αρχείων που εμπεριέχουν πληροφορία για κλιματολογικές τιμές της επιφανειακής θερμοκρασίας της θάλασσας για κάθε μέρα με εύρος 1 έτος μπροστά, με στόχο την καθημερινή ανανέωση της επιφανειακής θερμοκρασίας της θάλασσας με ρεαλιστικές τιμές για ολόκληρο το διάστημα που διαρκούν οι προσομοιώσεις. Η διαδικασία αυτή είναι πολύ σημαντική επειδή χωρίς αυτήν δε θα υπήρχαν ρεαλιστικα στοιχεία για το συγκεκριμένο πεδίο καθ' όλη τη διάρκεια των προσομοιώσεων, οπότε θα αναγκαζόμασταν να το διατηρούμε σταθερό, γεγονός όμως που θα προκαλούσε μεγάλες ανακρίβειες στις προσομοιώσεις.

Στο directory **PART1/NCL** το **NCL script** με όνομα **CHANGES.ncl** φτιάχτηκε με σκοπό την ενσωμάτωση ρεαλιστικών τιμών πάγου από ένα αρχείο που περιέχει κλιματολογικές τιμές πάγου και της επιφανειακής θερμοκρασίας θάλασσας από τα ενδιάμεσα αρχεία που αναφέρονται παραπάνω. Η ενσωμάτωση γίνεται σε κάθε σημείο του πεδίου ολοκλήρωσης του μοντέλου με εύρος 1 έτος μπροστά, με χρονικό βήμα ενός μήνα για τον πάγο και 1 ημέρας για την επιφανειακή θερμοκρασία της θάλασσας.

Στο directory **PART1/SHELL** το **Shell script** με όνομα **RUN_MODEL.sh** ρυθμίζει την επιχειρησιακή λειτουργία του μοντέλου. Αρχικά, μέσω των ενδιάμεσων αρχείων και των αρχικών συνθηκών που βασίζονται σε αναλύσεις παγκόσμιων μετεωρολογικών δεδομένων του αριθμητικού μοντέλου πρόγνωσης [GFS](https://www.ncdc.noaa.gov/data-access/model-data/model-datasets/global-forcast-system-gfs), φτιάχνονται τα αρχικά μετεωρολογικά πεδία με την παράλληλη εκτέλεση του εκτελέσιμου αρχείου **real.exe**. Έπειτα, γίνεται εκτέλεση του **NCL script CHANGES.ncl**, με αποτέλεσμα την ολοκλήρωση του προπαρασκευαστικού σταδίου των προσομοιώσεων όσον αφορά στην ενσωμάτωση ρεαλιστικών τιμών πάγου και επιφανειακής θερμοκρασίας της θάλασσας, όπως αναφέρθηκε παραπάνω. Αμέσως μετά, εκτελείται παράλληλα σε 24 CPUs το βασικό εκτελέσιμο αρχείο του μοντέλου **wrf.exe**. 

H κάθε προσομοίωση αναφέρεται σε ένα διάστημα 1 έτους, οπότε διαρκεί πολλές ώρες για να ολοκληρωθεί, έχοντας δεσμευμένα τα 24 CPUs περίπου για μία ημέρα σε κάθε προσομοίωση. Το σύνολο των προσομοιώσεων στην παρούσα φάση είναι 15, οπότε αποτελούσε μεγάλη ανάγκη να φτιαχτεί ένα σύστημα εύκολης, γρήγορης και αυτοματοποιημένης διαχείρισης, ώστε να εξοικονομείται πολύτιμος χρόνος. Η αυτοματοποίηση της διαδικασίας, που έχει ως αποτέλεσμα 1 προσομοίωση ανά ημέρα, σημαίνει ότι οι CPUs δεσμεύονται μόλις 15 ημέρες, πετυχαίνοντας βελτιστοποίηση στη χρήση των υπολογιστικών υποδομών της ACDG και πλήρη εκμετάλλευση της Message Passing Interface (MPI) δομής του αριθμητικού μοντέλου. Με χειροκίνητες διαδικασίες, η ίδια διαδικασία των 15 προσομοιώσεων απαιτούσε σχεδόν διπλάσιο χρόνο (~1 μήνα), με τον κίνδυνο να γίνουν λάθη και με ελλιπή εκμετάλλευση της παράλληλης δομής του μοντέλου.

Για τη διαχείριση, την επεξεργασία και την οπτικοποίηση του μεγάλου όγκου δεδομένων (big data), χρησιμοποιήθηκαν επίσης **Linux Shell** και **NCL scripts**.

Στο directory **PART1/SHELL**, με το **Shell script RUN_NCL.sh** τρέχουν τα **NCL scripts PLOT_"parameter".ncl** που βρίσκονται στα directory **PART1/NCL**, με σκοπό τη δημιουργία θεματικών χαρτών για όποια περιοχή και εποχή του χρόνου επιλέξει ο χρήστης. Οι θεματικοί χάρτες αναφέρονται στα εξής:

* Θερμοκρασιακές ανωμαλίες σε σχέση με τις μέσες μηνιαίες κλιματολογικές τιμές της περιόδου 1971-2000 (**PLOT_T850_DIFF.ncl**).
* Προσδιορισμός ακραίων καιρικών φαινομένων όσον αφορά στη θερμοκρασία, με βάση την απόκλιση από τις μέσες μηνιαίες κλιματολογικές τιμές (**PLOT_T850_QUAL_DIFF.ncl**).
* Προσδιορισμός της αβεβαιότητας στο πεδίο της θερμοκρασίας που προκύπτει από διαγράμματα spaghetti (**PLOT_SPAGHETTI.ncl**).
* Πεδία μέσης έντασης ανέμου (**PLOT_WIND850.ncl**).
* Πιθανότητα εμφάνισης μηνιαίου υετού (βροχή, χιόνι, χαλάζι) που υπερβαίνει προκαθορισμένα όρια (100, 200 και 300 mm), από την οποία εξάγονται χρήσιμες πληροφορίες για τον προσδιορισμό ακραίων καιρικών φαινομένων όσον αφορά στον υετό (**PLOT_PREC_PROB.ncl**).

Η θερμοκρασία και ο άνεμος αναφέρονται στο ισοβαρικό επίπεδο των 850 hPa, δηλαδή περίπου στα 1500 μ. από την επιφάνεια της θάλασσας. Σε προσομοιώσεις μεγάλης χωρικής και χρονικής κλίμακας αποτελεί συνήθη και αποτελεσματική πρακτική η οπτικοποίηση και αξιολόγηση των μετεωρολογικών παραμέτρων στο συγκεκριμένο ύψος από την επιφάνεια της θάλασσας. Επιπλέον, όσον αφορά στη βροχόπτωση, επιλέχθηκε τελικά να μελετηθεί ο υετός, ο οποίος περιλαμβάνει κάθε ατμοσφαιρικό κατακρήμνισμα. Έτσι, αντιμετωπίζεται μία πιθανή υποεκτίμηση που θα μπορούσε να προκύψει, κυρίως σε ψυχρές περιοχές που ένα μεγάλο μέρος του νερού φθάνει στη Γη σαν χιόνι.

**Οι προγνώσεις με τη μορφή θεματικών χαρτών επικεντρωμένων πάνω από την Ευρώπη για κάθε μήνα του χειμώνα 2015-6 είναι διαθέσιμες στο Issue 1: [Εποχιακή πρόγνωση καιρού για το χειμώνα 2015-6] (https://github.com/ellak-monades-aristeias/Meteoclima-Seasonal-Forecast/issues/1).** Οι προγνώσεις σε δυαδική μορφή λόγω του πολύ μεγάλου όγκου δεδομένων (> 100 Gb) δεν ήταν δυνατόν να διατεθούν online. Επομένως, διατίθενται έπειτα από προσωπική συνεννόηση. E-mail επικοινωνίας: gvarlas@hua.gr.


**_Παραδοτέο 2_**

Στη συγκεκριμένο παραδοτέο αναπτύχθηκε μεθοδολογία και λογισμικό αξιολόγησης των προγνώσεων. Η αξιολόγηση βασίζεται σε καθιερωμένους στατιστικούς ελέγχους των προγνωστικών πεδίων σε σχέση με τα αντίστοιχα πλεγματικά πεδία ανάλυσης (πλεγματικά πεδία ιστορικών μετεωρολογικών δεδομένων πολύ κοντά στην πραγματικότητα). Για τον συγκεκριμένο σκοπό αναπτύχθηκαν κώδικες σε **Linux Shell** και **NCL scripts** για την επαναπροβολή των προγνώσεων στις θέσεις των αναλύσεων του [GFS analyses](http://nomads.ncdc.noaa.gov/data.php) χωρικής ανάλυσης 0.5deg, καθώς και για τις εκτιμήσεις των στατιστικών μεγεθών. 

Αρχικά για όλους τους θερινούς μήνες του 2015, γίνεται εξαγωγή της μέσης τιμής των προγνωστικών δεδομένων (αποτελέσματα 15 προσομοιώσεων με αρχικοποίηση το Φεβρουάριο 2015) για κάθε μήνα και της μέσης τιμής των δεδομένων ανάλυσης για κάθε μήνα. Για τον υπολογισμό των μέσων τιμών υπάρχει δυνατότητα να συμπεριληφθούν δεδομένα κάθε ημέρας του μήνα είτε στις 00 [UTC](http://www.timeanddate.com/time/aboututc.html) είτε στις 12 UTC. Η διαδικασία αυτή γίνεται για κάθε μετεωρολογική παράμετρο και για κάθε σημείο της περιοχής μελέτης. Για να υπάρχει αντιστοιχία των δεδομένων, λόγω των διαφορετικών πλεγμάτων, γίνεται επαναπροβολή των προγνωστικών δεδομένων στις θέσεις των δεδομένων ανάλυσης με τη μέθοδο bilinear, συνθέτοντας αρχεία ASCII για τη συγκεκριμένη περιοχή για κάθε μεταβλητή. Έτσι π.χ. αν μελετάμε 1 μεταβλητή, τότε στην πρώτη στήλη θα έχουμε στοιχεία που σχετίζονται με την ημερομηνία και την ώρα, στη δεύτερη στήλη θα έχουμε τη μέση προβλεπόμενη τιμή για το συγκεκριμένο μήνα με βάση τις 15 προσομοιώσεις και στην τρίτη στήλη την αντίστοιχη μέση τιμή από τα πεδία ανάλυσης. Σε κάθε αρχείο ASCII απαιτείται η προσθήκη μίας επικεφαλίδας με 3 γραμμές, όπου αναφέρεται το σύνολο των μεταβλητών, το πλήθος των γραμμών που καταλαμβάνουν οι εγγραφές πριν την προσθήκη του HEADER και το πλήθος των στηλών όπως στο παράδειγμα παρακάτω:

Προσθήκη HEADER (όπου 1 είναι το σύνολο των μεταβλητών, 1000 το σύνολο των γραμμών και 3 το σύνολο των στηλών):
* 1 1000
* 1000 3
* 1 1 1 1 1 1

Αυτές οι διαδικασίες γίνονται με τα **NCL scripts EXTRACT_"parameter".ncl** για όποια περιοχή και όποιο μήνα επιλέγει ο χρήστης. Τα **NCL scripts** καθοδηγούνται από το **Shell script RUN_EXTRACT.sh**. Η στατιστική αξιολόγηση γίνεται για τα πλεγματικά πεδία:

* Θερμοκρασίας στο ισοβαρικό επίπεδο των 850 hpa (**EXTRACT_T850.ncl**).
* Ατμοσφαιρικής πίεση στη μέση στάθμη της θάλασσας (**EXTRACT_MSLP.ncl**).
* Έντασης ανέμου στο ισοβαρικό επίπεδο των 850 hPa (**EXTRACT_WIND850.ncl**).
* Υετού που περιλαμβάνει τη βροχή, το χιόνι και το χαλάζι (**EXTRACT_PREC.ncl**).

Τα παραπάνω scripts βρίσκονται στα directories **PART2/EX2ASCII/NCL** και **PART2/EX2ASCII/SHELL** αντίστοιχα. 

Στη συνέχεια υπολογίζονται διάφοροι στατιστικοί δείκτες:

το Bias,
το RMSE,
o συντελεστής Pearson,
ο συντελεστής R^2,
η μέση τιμή (Mean),
η τυπική απόκλιση (STD) και
ο Scatter Index (SI) για τις συνεχείς μεταβλητές (θερμοκρασία, άνεμος, πίεση),

και οι στατιστικοί δείκτες:

BS και RMSE για τις διακριτές μεταβλητές (υετός) σύμφωνα με τη μέθοδο του πίνακα ενδεχομένων (περισσότερες λεπτομέρειες για τη στατιστική αξιολόγηση διακριτών μεταβλητών στην εργασία: Papadopoulos and Katsafados, 2009). Επιπλέον, για τις 3 συνεχείς μεταβλητές παράγονται διαγράμματα διασποράς (Scatter plots) και για τον υετό διαγράμματα μεταβολής των στατιστικών μεγεθών συναρτήσει της ποσότητας υετού. 

Τα στατιστικά υπολογίζονται μέσω **NCL scripts** για τα δεδομένα στα αρχεία ASCII που αναφέρονται είτε στις 00 UTC, είτε στις 12 UTC, είτε ακόμα και στο σύνολό τους εάν ο χρήστης κάνει cat τα αντίστοιχα αρχεία ASCII με προσοχή στο HEADER. Τα **NCL scripts** για τα στατιστικά βρίσκονται στο directory **PART2/STATISTICS/NCL**.

Τα βασικά NCL scripts είναι το **CONTINUOUS.ncl** και το **DISCRETE.ncl**. Υπάρχουν ακόμα κάποια **NCL scripts** τα οποία καλούνται εσωτερικά από τα **CONTINUOUS.ncl** και **DISCRETE.ncl**. Τα NCL scripts **SCATTER.ncl** και **DIAGRAMS.ncl** χρησιμεύουν στην κατασκευή των διαγραμμάτων διασποράς για τις συνεχείς μετανλητές και των διαγραμμάτων μεταβολής των στατιστικών μεγεθών συναρτήσει της ποσότητας υετού αντίστοιχα. Επιπλέον, τα NCL scripts **NAMELIST.ncl**, **CONST_CONTINUOUS.ncl** και **CONST_DISCRETE.ncl** χρησιμοποιούνται και για να γίνεται πιο εύκολη η διαχείριση της όλης διαδικασίας. Επίσης, για τη διευκόλυνση των διαδικασιών υπολογισμού των στατιστικών μεγεθών για τις συνεχείς μεταβλητές χρησιμοποιείται το Shell script **RUN_STATISTICS.sh**, το οποίο βρίσκεται στο directory **PART2/STATISTICS/SHELL**.

Papadopoulos, A., & Katsafados, P. (2009). Verification of operational weather forecasts from the POSEIDON system across the Eastern Mediterranean. Natural Hazards and Earth System Science, 9(4), 1299-1306.


**Τα αποτελέσματα της αξιολόγησης για τους θερινούς μήνες του 2015 για μία περιοχή παγκόσμιας κάλυψης με εξαίρεση περιοχές πέρα από τις 70 μοίρες βόρειου και νότιου γεωγραφικού πλάτους (λόγω των πολικών ιδιομορφιών που παρουσιάζουν), είναι διαθέσιμα στο Issue 2: [Αξιολόγηση της εποχιακής πρόγνωσης καιρού για το καλοκαίρι 2015](https://github.com/ellak-monades-aristeias/Meteoclima-Seasonal-Forecast/issues/2)**

**Δυνητικοί χρήστες και ελάχιστες απαιτήσεις του Έργου**

Το Έργο σχετίζεται με την εποχιακή πρόγνωση του καιρού, θέμα που αφορά όλο τον κόσμο. Ο σχεδιασμός της Πολιτικής Προστασίας και η διαχείριση πιθανών ακραίων καιρικών φαινομένων από τον Κρατικό Μηχανισμό μπορούν να υποστηριχθούν αρκετά από την εποχιακή πρόγνωση του καιρού. Επιπλέον, το όλο εγχείρημα μπορεί να είναι χρήσιμο στην οικονομία, σε στρατιωτικές δραστηριότητες, στον τουρισμό, στην παραγωγή ενέργειας, στη γεωργία, στον προγραμματισμό κατασκευών, στις μεταφορές και σε πολλούς άλλους τομείς. Πέρα από τα οφέλη της εποχιακής πρόγνωσης καιρού, το λογισμικό διαχείρισης και αξιολόγησης της πρόγνωσης, που περιλαμβάνεται στα παραδοτέα θα καλύψει ανάγκες σε πιο εξειδικευμένους χρήστες. Μπορεί να χρησιμοποιηθεί κυρίως από άτομα που ασχολούνται με αριθμητικά μοντέλα πρόγνωσης ή με συναφή αντικείμενα, όπως μετεωρολόγους, κλιματολόγους, φυσικούς, μαθηματικούς, προγραμματιστές κ.α. Ωστόσο, οι κώδικες είναι φτιαγμένοι όσο το δυνατόν γενικοί, ώστε με μικρές τροποποιήσεις να μπορούν να υποστηρίξουν π.χ. στατιστική αξιολόγηση, διαχείριση big data και οπτικοποίηση δεδομένων και σε άλλα συστήματα εκτός από το συγκεκριμένο. Οι ελάχιστες απαιτήσεις για την παραγωγική χρήση του Έργου είναι η εγκατάσταση λειτουργικού Linux σε έναν υπολογιστή με καλό επεξεργαστή, μεγάλη μνήμη και υποστήριξη του Linux Shell Βash. Επιπλέον, απαιτείται η εγκατάσταση της γλώσσας προγραμματιμού NCL. Για την αξιοποίηση όλων των scripts που περιέχονται στα παραδοτέα χρειάζεται επιπλέον η εγκατάσταση του ατμοσφαιρικού μοντέλου WRF-GLOBAL ή GWRF. Η εγκατάσταση του συγκεκριμένου αριθμητικού μοντέλου πρόγνωσης καιρού προτείνεται, επειδή στην ουσία όλο το έργο βασίζεται στη διαχείριση της επιχειρησιακής λειτουργίας και της αξιολόγησης των προγνώσεων του συγκεκριμένου μοντέλου.


**_Βασικά συμπεράσματα_**

**Με το πέρας του έργου διαμορφώθηκε ένα ολοκληρωμένο, γρήγορο και αξιόπιστο σύστημα διαχείρισης, ανάλυσης, οπτικοποίησης και αξιολόγησης των εποχιακών προγνώσεων καιρού.**

**Οι πληροφορικές βελτιώσεις επιτεύχθηκαν κυρίως λόγω της αυτοματοποίησης ολόκληρης της διαδικασίας των προσομοιώσεων μέσω των Linux Shell και NCL scripts, που προσφέρουν μεγαλύτερη ευχέρεια, ταχύτητα και αξιοπιστία στη διεξαγωγή του συνόλου των προσομοιώσεων, καθώς και πιο επαρκή εκμετάλλευση της παραλληλίας MPI του ανοιχτού κώδικα Fortran του μοντέλου WRF-GLOBAL. Θετικό είναι το γεγονός επίσης ότι τώρα που η διαδικασία προσομοιώσεων είναι διαχειρίσιμη μέσω Linux Shell και NCL scripts, υπάρχει η δυνατότητα για ακριβή χρονικό προγραμματισμό των διαδικασιών μέσω του [crontab](http://www.adminschoice.com/crontab-quick-reference).**

**Επιπλέον, σημαντική ήταν η συμβολή της διερεύνησης του κατάλληλου αριθμού των CPUs (αυτή τη στιγμή 24 CPUs), με τους οποίους οι προσομοιώσεις εκτελούνται επιτυχώς και πιο γρήγορα και συγχρόνως επιτυγχάνεται βελτιστοποίηση της χρήσης των υπολογιστικών υποδομών. Έτσι, το μοντέλο πλέον βρίσκεται σε μία αξιόπιστη και ευσταθή κατάσταση με διευρημένες υπολογιστικές δυνατότητες για αυτοματοποιημένες εποχιακές προσομοιώσεις για μεγάλο διάστημα, π.χ. 1 έτος, σε παγκόσμια κλίμακα με βάση αρχικές συνθήκες από όποια μέρα του έτους επιλέξει ο χρήστης.**

<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Άδεια Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />Το έργο με τίτλο <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Πληροφορικές βελτιώσεις στην εποχιακή πρόγνωση του καιρού</span> από τον δημιουργό<a xmlns:cc="http://creativecommons.org/ns#" href="http://meteoclima.hua.gr/" property="cc:attributionName" rel="cc:attributionURL"> Γεώργιο Βάρλα</a> διατίθεται με την άδεια <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Αναφορά Δημιουργού - Παρόμοια Διανομή 4.0 Διεθνές </a>.
